{"author":"Tragicus","number":965,"diff_summary":[{"file":"CHANGELOG_UNRELEASED.md","status":"M","additions":96,"deletions":1},{"file":"mathcomp/algebra/poly.v","status":"M","additions":96,"deletions":1},{"file":"mathcomp/ssreflect/bigop.v","status":"M","additions":96,"deletions":1},{"file":"mathcomp/ssreflect/finset.v","status":"M","additions":96,"deletions":1}],"state":"merged","open_date":"2023-02-07T13:59:02Z","update_date":"2023-02-14T14:43:40Z","discussion":[],"review_discussion":[{"author":"proux01","file":"mathcomp/algebra/poly.v","date":"2023-02-08T16:50:01Z","comment":"```suggestion\r\nFrom mathcomp Require Import fintype bigop finset tuple.\r\nFrom mathcomp Require Import div ssralg countalg binomial.\r\n```\r\n(to enforce the 80 chars limit)"},{"author":"proux01","file":"mathcomp/algebra/poly.v","date":"2023-02-08T16:50:17Z","comment":"Spurious newlines (please remove them)"},{"author":"proux01","file":"mathcomp/algebra/poly.v","date":"2023-02-08T16:51:52Z","comment":"```suggestion\r\nunder eq_bigr => i _ do rewrite addrC -raddfN/=.\r\nrewrite -{1}(in_tupleE ps) -(map_tnth_enum (_ ps)) big_map.\r\nrewrite enumT bigA_distr_bigA2 /= coef_sum.\r\ntransitivity (\\sum_(I in {set 'I_(size ps)}) if #|I| == (size ps - n)%N then\r\n                  \\prod_(i < size ps | i \\in I) - ps`_i else 0).\r\n  apply eq_bigr => I _.\r\n  rewrite big_if/= big_const iter_mulr_1 -rmorph_prod/= coefCM coefXn.\r\n  under eq_bigr => i _ do rewrite (tnth_nth 0)/=.\r\n  rewrite -[#|I| == _](eqn_add2r n) subnK//.\r\n  rewrite -[X in (_ + _)%N == X]card_ord -(cardC I) eqn_add2l.\r\n  by case: ifP; rewrite ?mulr1 ?mulr0.\r\nby rewrite -big_mkcond mulr_sumr/=; apply: eq_bigr => I /eqP <-; rewrite prodrN.\r\n```"},{"author":"proux01","file":"mathcomp/algebra/poly.v","date":"2023-02-08T16:53:01Z","comment":"```suggestion\r\nrewrite coef_prod_XsubC ?leq_pred// => ps0.\r\nhave -> : (size ps - (size ps).-1 = 1)%N.\r\n  by move: ps0; case: (size ps) => // n _; exact: subSnn.\r\nrewrite expr1 mulN1r; congr GRing.opp.\r\nset f : 'I_(size ps) -> {set 'I_(size ps)} := fun a => [set a].\r\ntransitivity (\\sum_(I in imset f (mem setT)) \\prod_(i in I) ps`_i).\r\n  apply: congr_big => // I /=.\r\n  by apply/cards1P/imsetP => [[a ->] | [a _ ->]]; exists a.\r\nrewrite big_imset/=; last first.\r\n  by move=> i j _ _ ij; apply/set1P; rewrite -/(f j) -ij set11.\r\nrewrite -[in RHS](in_tupleE ps) -(map_tnth_enum (_ ps)) big_map enumT.\r\napply: congr_big => // i; first exact: in_setT.\r\nby rewrite big_set1 (tnth_nth 0).\r\n```"},{"author":"proux01","file":"mathcomp/algebra/poly.v","date":"2023-02-08T16:53:47Z","comment":"```suggestion\r\nrewrite coef_prod_XsubC// subn0; congr GRing.mul.\r\ntransitivity (\\sum_(I in [set setT : {set 'I_(size ps)}]) \\prod_(i in I) ps`_i).\r\n  apply: congr_big =>// i/=.\r\n  apply/idP/set1P => [/eqP cardE | ->]; last by rewrite cardsT card_ord.\r\n  by apply/eqP; rewrite eqEcard subsetT cardsT card_ord cardE leqnn.\r\nrewrite big_set1 -[in RHS](in_tupleE ps) -(map_tnth_enum (_ ps)) big_map enumT.\r\napply: congr_big => // i; first exact: in_setT.\r\nby rewrite (tnth_nth 0).\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/bigop.v","date":"2023-02-08T16:54:31Z","comment":"```suggestion\r\nLemma big_if I r (P Q : pred I) F G :\r\n  \\big[*%M/1]_(i <- r | P i) (if Q i then F i else G i) =\r\n    \\big[*%M/1]_(i <- r | P i && Q i) F i *\r\n    \\big[*%M/1]_(i <- r | P i && ~~ Q i) G i.\r\nProof.\r\nrewrite (bigID Q); congr (_ * _); apply: eq_bigr => i /andP[_].\r\n  by move=> ->.\r\nby move=> /negPf ->.\r\nQed.\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/finset.v","date":"2023-02-08T16:57:23Z","comment":"```suggestion\r\nLemma bigA_distr (R : Type) (zero one : R) (mul : Monoid.mul_law zero)\r\n  (add : Monoid.add_law zero mul) (I : finType) (F G : I -> R) :\r\n  \\big[mul/one]_i add (F i) (G i) =\r\n  \\big[add/zero]_(J in {set I}) \\big[mul/one]_i (if i \\in J then F i else G i).\r\nProof.\r\nunder eq_bigr => i _ do rewrite -(big_bool _ (fun b => if b then F i else G i)).\r\nrewrite bigA_distr_bigA.\r\nset f := fun J : {set I} => val J.\r\ntransitivity (\\big[add/zero]_(f0 in (imset f (mem setT)))\r\n                \\big[mul/one]_i (if f0 i then F i else G i)).\r\n  suff <-: setT = imset f (mem setT) by apply: congr_big=>// i; rewrite in_setT.\r\n  apply/esym/eqP; rewrite -subTset; apply/subsetP => b _.\r\n  by apply/imsetP; exists (FinSet b).\r\nrewrite big_imset; last by case=> g; case=> h _ _; rewrite /f => /= ->.\r\napply: congr_big => //; case=> g; first exact: in_setT.\r\nmove=> _; apply: eq_bigr => i _; congr (if _ then _ else _).\r\nby rewrite SetDef.pred_of_setE.\r\nQed.\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/finset.v","date":"2023-02-08T16:57:36Z","comment":"Spurious newline"}],"tags":[],"commits":[{"committer":"proux01","hash":"c46553e7bbf7a56920a90bfdcfe442f031ead55b","message":"bigop lemmas\n\nCo-authored-by: Tragicus <96025499+Tragicus@users.noreply.github.com>","date":"2023-02-14T14:13:13Z"},{"committer":"proux01","hash":"880caf5046c0c752ba1a7e16a4bbf0aadecabe17","message":"root-coefficients relations\n\nCo-authored-by: Tragicus <96025499+Tragicus@users.noreply.github.com>","date":"2023-02-14T14:13:41Z"},{"committer":"proux01","hash":"122ad2b1c8f07ee793b794b868a455cdf06849c7","message":"changelog\n\nCo-authored-by: Tragicus <96025499+Tragicus@users.noreply.github.com>","date":"2023-02-14T14:13:49Z"}]}