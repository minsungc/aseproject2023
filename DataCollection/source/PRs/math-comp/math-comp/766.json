{"author":"CohenCyril","number":766,"diff_summary":[{"file":"CHANGELOG_UNRELEASED.md","status":"M","additions":114,"deletions":66},{"file":"mathcomp/algebra/rat.v","status":"M","additions":114,"deletions":66}],"state":"merged","open_date":"2021-07-07T07:23:17Z","update_date":"2021-10-10T10:19:52Z","discussion":[{"author":"proux01","date":"2021-07-08T18:06:23Z","comment":"@CohenCyril CoqEAL should be fixed"},{"author":"CohenCyril","date":"2021-08-03T11:22:44Z","comment":"@pi8027 if you have some time to review this?"},{"author":"pi8027","date":"2021-08-04T12:51:35Z","comment":"Yes, I will do that by the end of this week."},{"author":"CohenCyril","date":"2021-10-01T11:55:28Z","comment":"@vbgl / @maximedenes / @zimmi48 please help, I'm completely clueless about this CI failure...\r\nTo reproduce:\r\n```bash\r\ncd $(mktemp -d)\r\ngit clone https://github.com/math-comp/multinomials -b nix-toolbox && cd multinomials\r\nnix-build\r\n```\r\nNote that `note nix-shell --run \"./configure && make\"` works :confused: "},{"author":"vbgl","date":"2021-10-01T12:08:05Z","comment":"The multinomials package is broken: the new `configure` script (recently added by Erik) refers to `/usr/bin/env` that is not available in the CI environment.\r\n\r\nBelow is a possible patch. (You may also set `dontConfigure = true;` to skip the failing configuration phase.)\r\n\r\n~~~\r\ndiff --git a/.nix/coq-overlays/multinomials/default.nix b/.nix/coq-overlays/multinomials/default.nix\r\nindex 1c62b70..64b4945 100644\r\n--- a/.nix/coq-overlays/multinomials/default.nix\r\n+++ b/.nix/coq-overlays/multinomials/default.nix\r\n@@ -33,6 +33,10 @@ with lib; mkCoqDerivation {\r\n \r\n   useDune2ifVersion = v: versions.isGe \"1.5.3\" v || v == \"dev\";\r\n \r\n+  preConfigure = ''\r\n+    patchShebangs configure\r\n+  '';\r\n+\r\n   propagatedBuildInputs =\r\n     [ mathcomp.ssreflect mathcomp.algebra mathcomp-finmap mathcomp-bigenough ];\r\n \r\n~~~"}],"review_discussion":[{"author":"pi8027","file":"mathcomp/algebra/rat.v","date":"2021-09-03T13:30:17Z","comment":"It would be nice to have a comment that briefly explains \"interlocking\". I also wish to have an example showing the necessity of the second case `Posz 1 as d, _ as n`."},{"author":"proux01","file":"mathcomp/algebra/rat.v","date":"2021-09-30T07:37:41Z","comment":"```suggestion\r\n(* when applied to explicit rationals. Since fracq is also \"locked\" in a      *)\r\n```"},{"author":"CohenCyril","file":"mathcomp/algebra/rat.v","date":"2021-09-30T09:45:21Z","comment":"> It would be nice to have a comment that briefly explains \"interlocking\".\r\n\r\ndone\r\n\r\n>  I also wish to have an example showing the necessity of the second case Posz 1 as d, _ as n.\r\n\r\nI think that was a mistake :)"},{"author":"pi8027","file":"mathcomp/algebra/rat.v","date":"2021-09-30T10:33:13Z","comment":"CHANGELOG entries would be required for this kind of lemmas."},{"author":"CohenCyril","file":"mathcomp/algebra/rat.v","date":"2021-10-01T11:51:51Z","comment":"It's intended to be \"internal\", but there is still no good way to tell it to Coq."},{"author":"pi8027","file":"mathcomp/algebra/rat.v","date":"2021-10-01T12:04:29Z","comment":"Sure."}],"tags":[{"tag":"kind: fix","description":"PR that fixes a bug. Please refer to the appropriate issue(s) if relevant."}],"commits":[{"author":"CohenCyril","committer":"CohenCyril","hash":"643cb5743de89bf4c9c5254a54037829d4737517","message":"Locking operators in rat.v","date":"2021-10-08T17:00:53Z"}]}