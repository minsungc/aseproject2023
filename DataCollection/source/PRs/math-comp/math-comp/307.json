{"author":"erikmd","number":307,"diff_summary":[{"file":".gitlab-ci.yml","status":"M","additions":210,"deletions":37},{"file":"Dockerfile","status":"M","additions":210,"deletions":37},{"file":"Dockerfile.make","status":"M","additions":210,"deletions":37}],"state":"merged","open_date":"2019-03-22T03:58:08Z","update_date":"2019-04-17T13:31:28Z","discussion":[{"author":"erikmd","date":"2019-03-22T12:05:32Z","comment":"Rebased on #306"},{"author":"CohenCyril","date":"2019-04-17T11:18:50Z","comment":"Waiting for #306's merge into master to be green..."},{"author":"erikmd","date":"2019-04-17T13:18:34Z","comment":"@CohenCyril\r\n> Waiting for #306's merge into master to be green...\r\n\r\nThanks Cyril ! this is indeed the case:\r\nhttps://gitlab.com/math-comp/math-comp/pipelines/57204553\r\nand the images have been successfully pushed to https://hub.docker.com/r/mathcomp/mathcomp-dev/tags"},{"author":"CohenCyril","date":"2019-04-17T13:32:01Z","comment":"@erikmd done! thank you for all of this :+1: "}],"review_discussion":[],"tags":[],"commits":[{"author":"erikmd","committer":"erikmd","hash":"19ab5bad5ceece0680d94114f3bef9b2a4b0c195","message":"Add commentary sections & Swap order of .make-build, .opam-build","date":"2019-04-16T13:22:28Z"},{"author":"erikmd","committer":"erikmd","hash":"c84bc1c92a9e77103a88a60d05f9f6ad07b64b5c","message":"Refactor jobs: Split .opam-build & Create .docker-deploy\n\n* The latter template job is trusted and only runs:\n  - in branch master,\n  - if all build *and* test jobs were successful\n    (major change in the deployment's condition)\n\n* The other jobs are not tagged with \"environment: name: deployment\",\n  so they won't be able to read scoped protected variables.\n\n* href: https://gitlab.com/help/ci/variables/README.md#limiting-environment-scopes-of-variables-premium","date":"2019-04-16T13:23:06Z"},{"author":"erikmd","committer":"erikmd","hash":"f4cc7395ed95e433e836f6cfcf65d849e7629024","message":"Print more debug information","date":"2019-04-16T13:23:06Z"},{"author":"erikmd","committer":"erikmd","hash":"77ed8b94fd552e24de6b6824aab4996bf1731aa5","message":"Swap the deploy and test stages\n\nso the images:\n- mathcomp/mathcomp-dev:coq-8.7\n- mathcomp/mathcomp-dev:coq-8.8\n- mathcomp/mathcomp-dev:coq-8.9\n- mathcomp/mathcomp-dev:coq-dev\nwill be pushed to Docker Hub even if a third-party library CI fails.","date":"2019-04-16T13:23:32Z"},{"author":"erikmd","committer":"erikmd","hash":"a03e0cb0ff40afabcaccba7f764076355ca82962","message":"Don't run \"opam clean -c\" to workaround ocaml/opam#3828","date":"2019-04-16T13:41:16Z"},{"author":"erikmd","committer":"erikmd","hash":"76559870c8a81a9e3ba3f1242e60ff8e5f53c03a","message":"Detail: Print a more legible description for the cloned external libraries","date":"2019-04-16T13:42:52Z"},{"author":"erikmd","committer":"erikmd","hash":"c11764ca767ce6c306fef3892a78f0114e5e818c","message":"[ci] Add tests with more libraries\n\n- coq-mathcomp-odd-order.dev + coq.dev\n- coq-mathcomp-bigenough.dev, coq-{8.7, 8.8, 8.9, dev}\n- coq-mathcomp-finmap.dev, coq-{8.7, 8.8, 8.9, dev}\n\nThe configs below are commented-out as the upstream repos' opam is not\nyet marked as compatible with mathcomp.dev (and Travis CI doesn't test\nit with mathcomp-dev images)\n\n # - coq-mathcomp-real-closed.dev, coq-{8.7, 8.8, 8.9, dev}\n # - coq-mathcomp-analysis.dev, coq-{8.8, 8.9, dev}\n\nClose math-comp/math-comp#245","date":"2019-04-16T13:42:52Z"}]}