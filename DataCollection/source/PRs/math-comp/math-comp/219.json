{"author":"CohenCyril","number":219,"diff_summary":[{"file":"mathcomp/Makefile.common","status":"M","additions":22,"deletions":20},{"file":"mathcomp/ssreflect/Makefile.detect-coq-version","status":"M","additions":22,"deletions":20}],"state":"merged","open_date":"2018-08-08T15:20:41Z","update_date":"2018-10-29T07:04:41Z","discussion":[{"author":"amahboubi","date":"2018-09-24T13:51:10Z","comment":"I do not know what to do with this PR. I am unable to review without at least a small description of the pb.\r\n@gares may be more relevant as a reviewer?"},{"author":"gares","date":"2018-09-24T18:38:41Z","comment":"I'd be happy if the code could call\r\n```\r\n$ ~/COQ/coq/bin/coqtop -print-version\r\n8.9+alpha 4.06.0\r\n```\r\nand \"parse\" that string, that was made easier to parse (the second version is the ocaml compiler)"},{"author":"CohenCyril","date":"2018-10-26T08:15:14Z","comment":"@gares actually `-print-version` seems to be unavailable for coq 8.6, so the modification you suggest actually implies dropping support..."},{"author":"CohenCyril","date":"2018-10-26T08:56:25Z","comment":"@gares I'd rather push this fix first, and later make another PR taking your remark into account and drop 8.6 when there is a consensus. I left a comment in the `Makefile.common` with the instructions."},{"author":"gares","date":"2018-10-26T09:02:53Z","comment":"I guess I added --print-version on 8.6, and then the more standard -print-version was also added. Could you try that? (I don't have a 8.6 around)"},{"author":"CohenCyril","date":"2018-10-26T09:43:58Z","comment":"> I guess I added --print-version on 8.6, and then the more standard -print-version was also added. Could you try that? (I don't have a 8.6 around)\r\n\r\nWith nix, coq 8.6 was around in a few seconds :heart: "},{"author":"gares","date":"2018-10-26T18:08:24Z","comment":"I'm a bit lost. Is the change I propose doable on 8 6 too or not? If not I shall merge as is. Else I should wait for a fix."},{"author":"CohenCyril","date":"2018-10-26T18:37:27Z","comment":"@gares the fix was made (unless there is more to fix than I thought) and it passed."}],"review_discussion":[{"author":"gares","file":"mathcomp/Makefile.common","date":"2018-10-31T10:43:26Z","comment":"@CohenCyril @SkySkimmer wrt #238 I think this line is fishy. `$(COQPROJECT)` points to `_CoqProject` that, IIRC, only contains `-R` directives but not the list of files."},{"author":"SkySkimmer","file":"mathcomp/Makefile.common","date":"2018-10-31T11:37:44Z","comment":"I believe it points to https://github.com/math-comp/math-comp/blob/d6dc5741ba44808e5f2f01a238d972ec2c11737f/mathcomp/fingroup/Make (which does have v files) as per https://github.com/math-comp/math-comp/blob/d6dc5741ba44808e5f2f01a238d972ec2c11737f/mathcomp/fingroup/Makefile#L3"},{"author":"CohenCyril","file":"mathcomp/Makefile.common","date":"2018-10-31T11:41:09Z","comment":"> [...] as per\r\n> \r\n> https://github.com/math-comp/math-comp/blob/d6dc5741ba44808e5f2f01a238d972ec2c11737f/mathcomp/fingroup/Makefile#L3\r\n\r\nYes indeed @SkySkimmer, but... could the double quotes be guilty here?"},{"author":"SkySkimmer","file":"mathcomp/Makefile.common","date":"2018-10-31T11:43:09Z","comment":"I think the issue is the double quotes, although they are a problem on this line not the grep line."}],"tags":[],"commits":[{"author":"CohenCyril","committer":"CohenCyril","hash":"94dd4260f6e281ddf3c8e3320fdc239a94f50b6d","message":"fix some bugs in Makefile","date":"2018-10-26T09:41:50Z"}]}