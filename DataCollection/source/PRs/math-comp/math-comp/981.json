{"author":"marinalopezchamosa","number":981,"diff_summary":[{"file":"mathcomp/ssreflect/ssrnat.v","status":"M","additions":51,"deletions":0}],"state":"merged","open_date":"2023-03-10T11:34:07Z","update_date":"2023-04-04T12:33:13Z","discussion":[{"author":"proux01","date":"2023-03-13T08:57:03Z","comment":"Thanks for your contribution! Some of these lemmas may indeed be useful. However, I wonder whether we really want to add all of them. Indeed, some rewritings can be obtained with patterns or the mechanism in [ssrAC](https://github.com/math-comp/math-comp/blob/master/mathcomp/ssreflect/ssrAC.v) as examplified below. Could you remove those lemmas from your pull request? (I guess the remaining lemmas should be the `___lemma` in https://github.com/math-comp/math-comp/issues/643 but I haven't thoroughly checked)\r\n\r\n```Coq\r\nFrom mathcomp Require Import ssreflect ssrfun ssrbool ssrnat bigop ssrAC.\r\n\r\nLemma ex1 m n p : (m + n) + p = (n + m) + p.\r\nProof. by rewrite [X in X + _]addnC. Qed.\r\n\r\nLemma ex2 m n p : (m + n) + p = (n + p) + m.\r\nProof. by rewrite (ACl (2*3*1))/=. Qed.\r\n\r\nLemma ex3 m n p : m + (n + p) = p + (m + n).\r\nProof. by rewrite (AC (1*2) (3*(1*2)))/=. Qed.\r\n```"},{"author":"marinalopezchamosa","date":"2023-03-22T15:38:04Z","comment":"Please let us know if any more changes are needed!"},{"author":"proux01","date":"2023-04-04T12:34:47Z","comment":"Thanks @marinalopezchamosa for your contribution and your patience with the reviewing process (as you can see, this issue #643 was particularly tricky)."}],"review_discussion":[{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T08:28:47Z","comment":"What's the motivation for this renaming? I have no opinion about it, but in any case it should come with a deprecation notation to help users adapt to the change:\r\n```suggestion\r\nLemma addnCAl m n p: m + n + p = n + (p + m).\r\nProof. by rewrite (addnC m) addnC addnCA. Qed.\r\n\r\n#[deprecated(since=\"mathcomp 1.17.0, note=\"use addnCAl instead\"\")]\r\nNotation addnACl := addnCAl.\r\n```\r\n"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T08:37:09Z","comment":"The `=>` can be directly used on `rewrite`, removing the need for `move`\r\n```suggestion\r\nProof. by rewrite -subn_eq0 => /eqP->; rewrite addn0. Qed.\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T08:40:02Z","comment":"For the sake of completeness, I would expect in addition\r\n```Coq\r\nLemma addnBl_leq m n p : m <= n -> (m - n) + p = p.\r\n```\r\nOk, it's below, please move it up here"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T08:41:38Z","comment":"Maybe the order of arguments could be\r\n```suggestion\r\nLemma addnBr_leq n p m : n <= p -> m + (n - p) = m.\r\n```\r\nso that if someone ever wants to rewrite from right to left, it is somewhat easier to provide the missing `n` and `p`"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T08:44:51Z","comment":"```suggestion\r\nLemma subnDAC m n p : m - (n + p) = (m - p) - n.\r\n```\r\nass the Commutation rather happens on the right"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T08:47:22Z","comment":"```suggestion\r\nLemma subnCDA m n p : m - (n + p) = m - p - n.\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T08:47:46Z","comment":"```suggestion\r\nLemma addnCBA m n p : p <= n -> m + (n - p) = n + m - p.\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T08:53:35Z","comment":"```suggestion\r\nLemma subnCBA m n p : p <= n ->\tm - (n - p) = p + m - n.\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T08:54:46Z","comment":"```suggestion\r\nProof. by rewrite -subn_eq0 => /eqP->; rewrite subn0. Qed.\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T08:55:24Z","comment":"maybe\r\n```suggestion\r\nLemma subnBr_leq n p m : n <= p -> m - (n - p) = m.\r\n```\r\nin case someone want to use it right to left"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T08:58:51Z","comment":"Maybe add\r\n```Coq\r\nLemma subnBl_leq m n p : n <= m -> (m - n) - p = 0.\r\n```\r\nfor completeness"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T09:06:11Z","comment":"maybe\r\n```suggestion\r\nLemma subDnAC m n p : p <= n -> m + n - p = n - p + m.\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T09:10:21Z","comment":"```suggestion\r\nLemma subDnCA m n p : p <= m -> m + n - p = n + (m - p).\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T09:14:31Z","comment":"```suggestion\r\nLemma subDnCAC m n p : m <= p -> m + n - p = n - (p - m).\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T09:23:17Z","comment":"```suggestion\r\nLemma addnBC m n : m - n + n = n - m + m.\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T09:24:01Z","comment":"```suggestion\r\nLemma addnCB m n : m - n + n = m + (n - m).\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T09:26:37Z","comment":"```suggestion\r\nLemma addBnAC m n p : n <= m -> m - n + p = p + m - n.\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T09:28:22Z","comment":"```suggestion\r\nLemma addBnA m n p : n <= m -> p <= n -> m - n + p = m - (n - p).\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T09:33:20Z","comment":"```suggestion\r\nLemma addBnCAC m n p : n <= m -> n <= p -> m - n + p = p - n + m.\r\n```"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T09:37:02Z","comment":"Move below `addnBr_leq`"},{"author":"proux01","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-03-23T09:37:51Z","comment":"```suggestion\r\nLemma subBnAC m n p : m - n - p = m - (p + n).\r\n```"},{"author":"marinalopezchamosa","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-04-03T13:56:33Z","comment":"This renaming was an accident. It's now back to addnACl"},{"author":"marinalopezchamosa","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-04-03T13:57:31Z","comment":"Did you mean something else? I think this lemma is not true"},{"author":"ybertot","file":"mathcomp/ssreflect/ssrnat.v","date":"2023-04-03T14:12:44Z","comment":"Maybe it is just a matter of replacing `n <= m` with `m <= n`. "}],"tags":[{"tag":"TODO: HB port","description":""}],"commits":[{"author":"marinalopezchamosa","hash":"fa9fb1b0bf06797ba04e5e94e7cf54bc823500dd","message":"Contribution issue-643","date":"2023-03-22T15:33:12Z"},{"hash":"7536c519355a7120557f3870f767fb8587df48e7","message":"Requested changes","date":"2023-03-22T15:33:12Z"},{"author":"marinalopezchamosa","hash":"5d2de0334bbbec18e20dda846b5ac6c6ffaafa42","message":"Update mathcomp/ssreflect/ssrnat.v\n\nCo-authored-by: Pierre Roux <pierre.roux@onera.fr>","date":"2023-04-03T13:53:36Z"},{"author":"proux01","committer":"proux01","hash":"86a65812e51cfe0b8feb01ad815d5e2024eb6846","message":"Add subnBl_leq","date":"2023-04-04T09:16:39Z"}]}