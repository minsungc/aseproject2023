{"author":"SnarkBoojum","number":923,"diff_summary":[{"file":".nix/config.nix","status":"M","additions":26,"deletions":13},{"file":"CHANGELOG_UNRELEASED.md","status":"M","additions":26,"deletions":13},{"file":"mathcomp/algebra/poly.v","status":"M","additions":26,"deletions":13},{"file":"mathcomp/algebra/ssrnum.v","status":"M","additions":26,"deletions":13},{"file":"mathcomp/field/algebraics_fundamentals.v","status":"M","additions":26,"deletions":13},{"file":"mathcomp/field/closed_field.v","status":"M","additions":26,"deletions":13},{"file":"mathcomp/field/fieldext.v","status":"M","additions":26,"deletions":13},{"file":"mathcomp/field/finfield.v","status":"M","additions":26,"deletions":13},{"file":"mathcomp/field/separable.v","status":"M","additions":26,"deletions":13}],"state":"merged","open_date":"2022-09-13T09:17:33Z","update_date":"2022-09-20T15:22:49Z","discussion":[{"author":"proux01","date":"2022-09-13T09:36:16Z","comment":"Then, you can either try to modify the current `hornerE` but if CI reveals too many breakage, it's probably better to add a new multirule lemma. In any case, feel free to open a pull request, this will launch the CI on math-comp itself and a few reverse dependencies, enabling you to assess the impact of your change."},{"author":"SnarkBoojum","date":"2022-09-13T09:43:12Z","comment":"The impact should be pretty minimal ; if you look at the patch you'll see most proofs using `hornerE` break because they want to simplify something which is already simple."},{"author":"proux01","date":"2022-09-13T10:05:20Z","comment":"Ho, sorry, I mixed this for the issue and didn't notice it is a PR.\r\nYour patch indeed looks pretty good.\r\nAccording to the CI, you need to prepare an overlay real-closed (and then possibly CoqEAL and Abel), could you do that to check the change is reasonnable there too (maybe just add `?` to make your patch backward compatible)."},{"author":"SnarkBoojum","date":"2022-09-13T10:12:40Z","comment":"I'm clueless on how to make an overlay, but I'm already having a look at mathcomp-real-closed, I'll look into CoqEAL later.\r\n\r\nI don't know anything about Abel yet but I can probably dig."},{"author":"proux01","date":"2022-09-13T10:18:17Z","comment":"For overlays, just open a PR on the other project (real-closed, CoqEAL,...)\r\nIf you want to run the CI with the overlay here, you can update the `.nix/config.nix` file adding lines like `mathcomp-real-closed.override.version = \"SnarkBoojum:<name_of_you_branch_on_your_fork_of_real_closed>\";` in each bundle."},{"author":"proux01","date":"2022-09-13T10:19:22Z","comment":"Note that there might be nothing to do for CoqEAL and Abel, you'll find out after doing the overlay for real-closed since they both depend on real-closed."},{"author":"SnarkBoojum","date":"2022-09-13T12:07:14Z","comment":"Ok, I made a fork and tried to point config.nix to it... is it enough?"},{"author":"SnarkBoojum","date":"2022-09-13T13:39:23Z","comment":"On my box with my patches to mathcomp, mathcomp-real-closed and mathcomp-abel, everything is ok."},{"author":"proux01","date":"2022-09-14T05:54:13Z","comment":"@SnarkBoojum congrats! CI is green (and I stand corrected, the change did not break everything). Your patch looks great and I'd like to merge by next week if there is no more comments.\r\nFor this, we first need to get the two overlays (real-closed and abel) merged, since they are backward compatible. Could you open the pull requests there?"},{"author":"SnarkBoojum","date":"2022-09-14T06:31:03Z","comment":"I see three failures in the tests... so it's not all green.\r\n\r\nThe PR are opened, but it looks like MC-Abel's CI has issues with the PR, and for MC-real-closed, it looks like someone needs to manually trigger the CI."},{"author":"proux01","date":"2022-09-14T06:47:45Z","comment":"> I see three failures in the tests... so it's not all green.\r\n\r\nThose are expected because no overlays are set for the Docker based CI (but since they are successfully tested in the Nix based CI, that's fine)."},{"author":"SnarkBoojum","date":"2022-09-14T06:56:47Z","comment":"I must admit I have a hard time knowing exactly what a given check-line corresponds to -- so I don't know how problematic each is."},{"author":"SnarkBoojum","date":"2022-09-14T07:16:00Z","comment":"I'm not sure my last change on MC-Abel is that good on the new hornerE ; how can I restart the CI here?"},{"author":"proux01","date":"2022-09-14T12:12:24Z","comment":"> I'm not sure my last change on MC-Abel is that good on the new hornerE ; how can I restart the CI here?\r\n\r\nEither click on `details` on the right of the job and there should be a `Rerun all jobs` button on top right corner, or just force-push (`git commit --amend --no-edit; git push --force-with-lease`)."},{"author":"SnarkBoojum","date":"2022-09-20T15:24:51Z","comment":"Oh, @CohenCyril, thank you but shouldn't you have dealt with the real-closed PR before merging this one?"},{"author":"proux01","date":"2022-09-20T15:27:55Z","comment":"Yes, we should merge the real-closed overlay: https://github.com/math-comp/real-closed/pull/49\r\n(and remove the overlays here, I can do that in a separate PR)"},{"author":"CohenCyril","date":"2022-09-21T15:10:58Z","comment":"Oh right, I did a mistake yesterday... I was tired. Thanks noticing, and for preparing the overlay-removing PR"},{"author":"proux01","date":"2022-09-22T14:01:32Z","comment":"We are now all set, thanks @SnarkBoojum for the contribution!"}],"review_discussion":[],"tags":[],"commits":[{"hash":"9d51546c6f03d7e84bc2a6c5e4f328f3ac75adfd","message":"Made hornerE respect powers","date":"2022-09-13T09:09:37Z"},{"hash":"1e0fb9fad333acaafea54f2d786afe75b801be66","message":"Try to run CI on adapted real-closed","date":"2022-09-13T12:05:24Z"},{"hash":"35d7e39fb018358d29561893b9e893cbf6ee0be2","message":"Try to run CI on adapted Abel","date":"2022-09-13T13:24:06Z"}]}