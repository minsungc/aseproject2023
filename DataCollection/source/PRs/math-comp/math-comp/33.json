{"author":"ejgallego","number":33,"diff_summary":[{"file":"mathcomp/ssreflect/plugin/trunk/ssreflect.ml4","status":"M","additions":2,"deletions":2},{"file":"mathcomp/ssreflect/plugin/v8.5/ssreflect.ml4","status":"M","additions":2,"deletions":2}],"state":"merged","open_date":"2016-03-03T16:09:07Z","update_date":"2016-03-03T21:06:49Z","discussion":[{"author":"gares","date":"2016-03-03T21:06:44Z","comment":"thanks\n"},{"author":"ejgallego","date":"2016-03-03T21:14:54Z","comment":"thanks Enrico!\n"},{"author":"thery","date":"2016-03-04T08:51:55Z","comment":"Hi,\n\nDoes this solve the problem of the search that was not working properly \nin jsCoq?\n\nOn 03/03/2016 10:14 PM, Emilio Jesús Gallego Arias wrote:\n\n> thanks Enrico!\n> \n> —\n> Reply to this email directly or view it on GitHub\n> https://github.com/math-comp/math-comp/pull/33#issuecomment-191967213.\n"},{"author":"ejgallego","date":"2016-03-04T10:15:48Z","comment":"@thery there have been many improvements to the search support, both in the Coq version we ship and in jsCoq itself; IMHO search works much better now.\n\nHowever, large searches still generate `StackOverflows`, I think I have a possible intuition about what the problem is and won't be easy to fix; for now I suggest to workarounds:\n- use `Search ... in module`.\n- start chrome with a larger stack size: `--js-flags=\"--stack-size=65536\"`\n\nIn fact, I've missed this problem as I usually test with a large stack size.\n"},{"author":"ejgallego","date":"2016-03-04T18:59:02Z","comment":"Just for reference @thery, I think I have fully nailed the search issue, see: ejgallego/jscoq#13 \n"},{"author":"gmalecha","date":"2016-04-24T20:50:01Z","comment":"@ejgallego What are the largest searches that you've done?\n"},{"author":"thery","date":"2016-04-24T21:23:43Z","comment":"I guess a search that returns more than 1000 results is useless\n\nOn 04/24/2016 10:50 PM, Gregory Malecha wrote:\n\n> @ejgallego https://github.com/ejgallego What are the largest searches\n> that you've done?\n> \n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/math-comp/math-comp/pull/33#issuecomment-214032772\n"},{"author":"ejgallego","date":"2016-04-25T17:22:56Z","comment":"@gmalecha searching with Mathcomp loades easily goes throu filtering ten-of-thousands of entries (as @thery points out, not all of them should be returned thou).\n"},{"author":"ejgallego","date":"2016-05-02T14:58:35Z","comment":"Hi @thery , recent improvements to the Chrome recursion optimizer means that large searches seem to work OK now. Do you have a concrete test case? Thanks.\n\n[BTW, I won't spam this issue anymore, people interested in Search performance can follow ejgallego/jscoq#13 ]\n"}],"review_discussion":[],"tags":[],"commits":[{"author":"ejgallego","committer":"ejgallego","hash":"a8962654c562349f24728613352ea76268227471","message":"[search] Use msg_info to notify search results.\n\nBy default, the search command calls `Pp.msg` to print search results.\n\nUnfortunately, this bypasses the `log_via_feedback` option and produces\nnot very nice results on feedback-depending IDES like JsCoq.\n\nA proper fix would involve merging coq/coq#143 , and the upcoming search\ncleanup, but this should do the trick for now.\n\nI couldn't observe any problem with the usual testing.","date":"2016-03-03T16:07:45Z"}]}