{"author":"proux01","number":842,"diff_summary":[{"file":"CHANGELOG_UNRELEASED.md","status":"M","additions":27,"deletions":5},{"file":"mathcomp/algebra/intdiv.v","status":"M","additions":27,"deletions":5},{"file":"mathcomp/algebra/ssrint.v","status":"M","additions":27,"deletions":5}],"state":"merged","open_date":"2022-01-15T19:52:23Z","update_date":"2022-03-04T09:29:43Z","discussion":[{"author":"proux01","date":"2022-02-17T08:52:10Z","comment":"Rebased on top of #841 "}],"review_discussion":[{"author":"CohenCyril","file":"mathcomp/algebra/intdiv.v","date":"2022-01-17T13:20:50Z","comment":"```suggestion\r\nwithout loss /forallP a_dvM0: / [forall j, a %| M 0%R j]%Z.\r\n```"},{"author":"CohenCyril","file":"mathcomp/algebra/intdiv.v","date":"2022-01-17T13:21:01Z","comment":"```suggestion\r\n  pose Uur := col' 0 (\\row_j (1 - (M 0%R j %/ a)%Z)).\r\n```"},{"author":"CohenCyril","file":"mathcomp/algebra/intdiv.v","date":"2022-01-17T13:22:35Z","comment":"Actually, I wonder why it couldn't be\r\n```suggestion\r\nwithout loss /forallP a_dvM0: / [forall j, a %| M 0 j]%Z.\r\n```\r\nas before?\r\nThe scope stack for `fun_of_matrix` should include `%R`, shouldn't it?"},{"author":"proux01","file":"mathcomp/algebra/intdiv.v","date":"2022-01-17T13:26:36Z","comment":"Sure but the `%Z` locally puts `int_scope` on top."},{"author":"proux01","file":"mathcomp/algebra/intdiv.v","date":"2022-01-17T14:48:11Z","comment":"I just had a closer look and there is no scope associated by `fun_of_matrix` on the indices:\r\n```coq\r\nArguments fun_of_matrix [R]%type_scope [m n]%nat_scope A%ring_scope i j\r\n```\r\nhence the `%Z` putting int_scope on top of the stack.\r\n\r\nAnyway, you are right that `0%R` is nicer than `ord0`."},{"author":"CohenCyril","file":"mathcomp/algebra/intdiv.v","date":"2022-01-18T16:00:16Z","comment":"I wonder if it is possible to add ring_scope to the stack as in\r\n```coq\r\nArguments fun_of_matrix [R]%type_scope [m n]%nat_scope%ring_scope A%ring_scope i j\r\n```"},{"author":"proux01","file":"mathcomp/algebra/intdiv.v","date":"2022-01-20T12:44:59Z","comment":"Note that this would be\r\n```\r\nArguments fun_of_matrix [R]%type_scope [m n]%nat_scope A%ring_scope (i j)%ring_scope\r\n```\r\n(`m n` being the size of the matrix)\r\nUnfortunately I tried but this didn't work (0 was still interpreted in int_scope, I guess the notations are resolved before the coercions during the elaboration phase)."}],"tags":[],"commits":[{"author":"proux01","committer":"proux01","hash":"f344d66b1b82910441c37018ab10bb716ae961f7","message":"Add number notation for int\n\nNow, 12 or -42 are read as Posz 12 or Negz 41 in scope int_scope.","date":"2022-03-04T07:45:00Z"}]}