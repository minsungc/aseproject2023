{"author":"CohenCyril","number":703,"diff_summary":[{"file":"CHANGELOG_UNRELEASED.md","status":"M","additions":1095,"deletions":2},{"file":"mathcomp/algebra/matrix.v","status":"M","additions":1095,"deletions":2},{"file":"mathcomp/algebra/mxalgebra.v","status":"M","additions":1095,"deletions":2},{"file":"mathcomp/ssreflect/order.v","status":"M","additions":1095,"deletions":2}],"state":"merged","open_date":"2021-03-04T19:43:10Z","update_date":"2021-03-08T21:17:14Z","discussion":[{"author":"CohenCyril","date":"2021-03-07T01:45:30Z","comment":"@thery  I did the split -> #710 "},{"author":"CohenCyril","date":"2021-03-07T01:46:27Z","comment":"I also dramatically enhanced the block matrix theory... It will be here soon."},{"author":"CohenCyril","date":"2021-03-07T12:01:09Z","comment":"@thery I ended up adding a couple lemmas, feels rather complete now."},{"author":"CohenCyril","date":"2021-03-07T13:16:22Z","comment":"@thery FYI I added a commit renaming `tagnat.val` to `tagnat.sig`: it causes less undesirable name-clashes, especially if one wants to import `tagnat`, as in [matrix.v](https://github.com/math-comp/math-comp/pull/703/files#diff-f457cb0bf11677ea475ce7d07aa9d8ce79d060ef642432808d92ceb55d6a3fc5R3743)."},{"author":"thery","date":"2021-03-07T14:30:36Z","comment":"@CohenCyril looks good. Will I have a closer look on monday."},{"author":"CohenCyril","date":"2021-03-08T19:53:11Z","comment":"@thery I addressed all your comments."},{"author":"CohenCyril","date":"2021-03-09T10:44:03Z","comment":"@thery Thanks!"}],"review_discussion":[{"author":"thery","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-05T14:06:40Z","comment":"Could this be a separate commit?\r\n"},{"author":"thery","file":"mathcomp/algebra/matrix.v","date":"2021-03-05T14:11:32Z","comment":"Are they places where this new constructor could be used in the current library?"},{"author":"thery","file":"mathcomp/ssreflect/order.v","date":"2021-03-05T14:22:23Z","comment":"I was expected `tagnat.tag` for` val1`  and `tagnat.nat` for `val2` but maybe it is not a good idea."},{"author":"thery","file":"mathcomp/algebra/matrix.v","date":"2021-03-05T14:28:08Z","comment":"A pity these new constructions come with very little theorems associated with\r\nthem.\r\nI was thinking for example about the trace of `mxdiag` or the transpose of `mxcol`"},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-05T14:46:34Z","comment":"How do you suggest to split? (They are related in cascade, each idem depends on the previous one)"},{"author":"CohenCyril","file":"mathcomp/algebra/matrix.v","date":"2021-03-05T14:46:50Z","comment":"Not yet, but that's all part of a bigger plan: https://github.com/math-comp/math-comp/pull/207/files#diff-f7a28e39a52f7013e677ad2bab9930222f5af8c0df4acb10e978bf2a1a2fa37fR291-R318"},{"author":"CohenCyril","file":"mathcomp/ssreflect/order.v","date":"2021-03-05T14:49:19Z","comment":"I'm really open to any name here. Yours are funny, it also made me think `tagnat.val1` might not have to be a natural number... so that there could be a further generalisation... as long as it is an ordered finite type..."},{"author":"CohenCyril","file":"mathcomp/algebra/matrix.v","date":"2021-03-05T14:51:38Z","comment":"Sure. I did not do the closure, I wrote the bare minimum for https://github.com/math-comp/math-comp/pull/207/files#diff-f7a28e39a52f7013e677ad2bab9930222f5af8c0df4acb10e978bf2a1a2fa37fR291-R318 to go through...\r\nSo what should I add?\r\n- the trace of mxdiag\r\n- the transpose of all of them\r\n- I guess `mulmx_row_diag`\r\n- maybe `mulmx_col_row` if it makes sense...\r\nother ideas?"},{"author":"CohenCyril","file":"mathcomp/algebra/matrix.v","date":"2021-03-05T14:52:18Z","comment":"Maybe stuff with `0`s and `1`s and `a%:M`"},{"author":"CohenCyril","file":"mathcomp/ssreflect/order.v","date":"2021-03-05T15:01:06Z","comment":"Actually for now (because of the restriction on finite ordered types) its preferable to stick to the first component being a nat. It's a bit silly, but it could be generalized later. Also I prefer to keep `val1` and `val2` string-related to `val`, because it's easier for me to remember..."},{"author":"thery","file":"mathcomp/algebra/matrix.v","date":"2021-03-05T15:07:33Z","comment":"I guess there are lots in fact, for example the rank of `\\mx_diag` also is there an equivalent of `submx`\r\n"},{"author":"thery","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-05T15:23:00Z","comment":"I was just thinking that the first 3 items were mostly independent of block matrices. \r\nTagnat instead seems more closely related to matrices."},{"author":"thery","file":"mathcomp/algebra/matrix.v","date":"2021-03-05T15:29:35Z","comment":"I was thinking at places where one has been using `\\matrix_` where one of your constructors could be more natural but a rapid grep showed me nothing\r\n"},{"author":"thery","file":"mathcomp/ssreflect/order.v","date":"2021-03-05T15:30:43Z","comment":"Ok just it made explicit the encoding of `tagnat` but that''s fine"},{"author":"CohenCyril","file":"mathcomp/algebra/matrix.v","date":"2021-03-07T12:41:47Z","comment":"Thanks for checking"},{"author":"thery","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T17:31:46Z","comment":"mxblock,"},{"author":"thery","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T17:33:56Z","comment":"why not submxdiag?"},{"author":"thery","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T17:34:20Z","comment":"provide"},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:01:16Z","comment":"This would be redundant with `submxblock A i i`"},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:03:18Z","comment":"I could add it as a notation, but I'm not convinced it is very useful"},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:03:38Z","comment":"```suggestion\r\n  + `mxblock`, `mxcol`, `mxrow` and `mxdiag` with notations\r\n```"},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:03:51Z","comment":"```suggestion\r\n  + We provide the following lemmas on these definitions:\r\n```"},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:06:16Z","comment":"cf https://github.com/math-comp/math-comp/pull/703/files#diff-f457cb0bf11677ea475ce7d07aa9d8ce79d060ef642432808d92ceb55d6a3fc5R4371-R4373"},{"author":"thery","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:07:18Z","comment":"maybe just adding a comment"},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:14:29Z","comment":"Where and what comment would you think is appropriate?\r\nSomething like ``there is no analogous for `mxdiag` because one can simply apply `submxblock A i i` ``?"},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:15:39Z","comment":"@thery if you resolve the issue by hand I cannot commit the \"suggested change\" any more. Please leave this kind of comment open until github automatically resolves them when I push the change. :smile_cat: "},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:16:21Z","comment":"done"},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:16:32Z","comment":"done"},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:24:26Z","comment":"```suggestion\r\n    former constructions. There is no analogous for `mxdiag` because\r\n    one can simply apply `submxblock A i i`.\r\n```"},{"author":"thery","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:24:27Z","comment":"yes in the documention of `matrix.v`.\r\nThis makes me realised that there is no doc for `subblock` and the others."},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:24:51Z","comment":"See the new revision"},{"author":"thery","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:26:26Z","comment":"this should go in the header of `matrix.v` with the documentation of `subblock` and al"},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:29:30Z","comment":"I added a comment about the absence of `submxdiag` juste below the line you pointed out.\r\nFor the other subblocks I am tempted to open an issue instead of fixing it here."},{"author":"thery","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T18:35:13Z","comment":"I am not sure I understand. \r\nYou have introduced new functions `submxblock` ... so you should add their documentation in the header of `matrix`. I think the comment about the absense of `submxdiag` should go there too."},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2021-03-08T19:35:02Z","comment":"Ah you are right, sorry I got confused between the changelog and the header"}],"tags":[{"tag":"kind: enhancement","description":"Issue or PR about addition of features."}],"commits":[{"author":"CohenCyril","committer":"CohenCyril","hash":"7db7a5fbce42ff387a5750f9fbde5436a9aab1cc","message":"Adding big block matrices\n\n- with special cases for row, column, and diagonal matrices\n- we define an order bijection between the indexing of the whole matrix\n  and the indexing of the blocks to preserve triangularity","date":"2021-03-08T19:52:27Z"}]}