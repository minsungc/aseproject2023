{"author":"erikmd","number":272,"diff_summary":[{"file":".gitlab-ci.yml","status":"M","additions":62,"deletions":12},{"file":"INSTALL.md","status":"M","additions":62,"deletions":12},{"file":"coq-mathcomp-ssreflect.opam","status":"M","additions":62,"deletions":12}],"state":"merged","open_date":"2019-01-28T17:34:47Z","update_date":"2019-01-29T12:29:39Z","discussion":[{"author":"erikmd","date":"2019-01-28T18:46:31Z","comment":"Hi @Zimmi48, it seems that **coqbot**'s report is working only for the pipeline itself, not for the individual jobs: IINM the report of the jobs should appear only if there is a job failing (?) and as soon as a job has failed; [which is the case](https://gitlab.com/math-comp/math-comp/-/jobs/152381492) − because I have forgotten the code below in the `.yml`:\r\n```\r\ncoq-8.9:\r\n  extends: .opam-build\r\n```\r\n\r\nThis jobs-reporting feature was working in #270 however… do you have an idea of the source of that issue?\r\nFYI here is a screenshot of the webhooks integration config:\r\n\r\n![2019-01-28_19-17-04_screenshot_webhooks](https://user-images.githubusercontent.com/10367254/51858448-0c69a600-2335-11e9-9440-ef707d1e42a8.png)\r\n\r\n…I don't know if this a known bug, or if I should just remove the job webhook, and add it again?"},{"author":"Zimmi48","date":"2019-01-28T21:12:30Z","comment":"@erikmd There are a few exceptions to the failures that are reported. Docker image not found is among them because it often corresponds to an outdated job whose image has been deleted. If you find this problematic, I could change that..."},{"author":"erikmd","date":"2019-01-28T21:33:58Z","comment":"@Zimmi48 OK thanks for your reply! I was not aware that **coqbot** was filtering-out the job reports depending on the failures' type.\r\n\r\nOn the one hand, I find it very convenient that individual job successes don't lead to a report (in order to avoid cluttering the PR summary) but indeed on the other hand, the fact that only `script` failures are reported is not that intuitive IMHO: adding a report for all job failures could be handy to always have a nice *shortcut* to the corresponding log… (if it's not too much work for implementing this).\r\n\r\nAnyway, if you think that changing this would have a negative impact on the workflow you are relying on in `coq` CI, forget about it!"},{"author":"Zimmi48","date":"2019-01-29T08:04:20Z","comment":">if it's not too much work for implementing this\r\n\r\nIt's not. In fact, it's more work to do the filtering. The issue, as shown by the message of the commit which introduced it, was rather to avoid creating noise (https://github.com/coq/bot/commit/e09800677c99cd15417a31d8fb19b8ab36faefe0). But there is no reason why this should impact you negatively. I've just made this condition specific to Coq (https://github.com/coq/bot/commit/488385c4172771ba5ac27296e33b2725649b844e)."},{"author":"erikmd","date":"2019-01-29T15:00:57Z","comment":"> there is no reason why this should impact you negatively. I've just made this condition specific to Coq.\r\n\r\nGreat! Thank you @Zimmi48! and thanks @CohenCyril for the merge."}],"review_discussion":[],"tags":[],"commits":[{"author":"erikmd","committer":"erikmd","hash":"fc7276ec8a92ca6c76cf31511681c55fcfa23a62","message":"Update INSTALL.md for installing mathcomp as local opam packages\n\nThis patch documents the change 1046da99d22462d6aeb23dd12043c2537f47abf1\nthat was required by the GitLab CI setup to be able to rely on opam 2.0.\n\nClose #251","date":"2019-01-28T16:41:30Z"},{"author":"erikmd","committer":"erikmd","hash":"2f550fa5c5a52bcf963766247af04e099822aead","message":"Propose to bump the required version of coq in coq-mathcomp-ssreflect.opam\n\nso the CI could use the Docker image coqorg/coq:8.9 (which is already available\nalbeit it currently is a synonymous of coqorg/coq:8.9-beta1 with the opam repos\ncoq-released + coq-core-dev + coq-extra-dev)","date":"2019-01-28T17:01:38Z"},{"author":"erikmd","committer":"erikmd","hash":"bf2d8651e903d206e5e1ce360ef6b026c2933616","message":"[ci] Add math-comp/odd-order and coq-community/lemma-overloading jobs\n\nRelated: math-comp/math-comp#245 and math-comp/math-comp#256","date":"2019-01-28T18:32:17Z"}]}