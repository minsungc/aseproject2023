{"author":"SnarkBoojum","number":942,"diff_summary":[{"file":"CHANGELOG_UNRELEASED.md","status":"M","additions":33,"deletions":1},{"file":"mathcomp/algebra/ssralg.v","status":"M","additions":33,"deletions":1}],"state":"merged","open_date":"2022-11-17T06:52:26Z","update_date":"2022-12-12T13:02:40Z","discussion":[{"author":"SnarkBoojum","date":"2022-11-17T06:53:44Z","comment":"This is about issue #928."},{"author":"SnarkBoojum","date":"2022-11-17T14:52:36Z","comment":"Ah, I had missed the part about moving the Arguments away ; I'll work on it probably tomorrow afternoon."},{"author":"proux01","date":"2022-12-12T13:01:39Z","comment":"I fixed the last remaining issues, let's merge.\r\n\r\n@SnarkBoojum when a point is addressed, feel free to click on \"Resolve conversation\" so that it's easier to see what remains to be done."}],"review_discussion":[{"author":"proux01","file":"mathcomp/algebra/ssralg.v","date":"2022-11-17T08:58:49Z","comment":"Looking around in the codebase, it seems the most common indentation style is something like\r\n```suggestion\r\nLemma telescope_sumr_eq (a b : nat) (f u : nat -> V) : (a <= b)%N ->\r\n    (forall k, (a <= k < b)%N -> u k = f k.+1 - f k) ->\r\n  \\sum_(a <= k < b) u k = f b - f a.\r\n```\r\nAlso: please name the nat `n` and `m` as in `telescope_sumr` above."},{"author":"proux01","file":"mathcomp/algebra/ssralg.v","date":"2022-11-17T09:01:43Z","comment":"Given that `k` and `kab` are not explicitly mentionned and only used on this line you can also use question marks\r\n```suggestion\r\nunder eq_big_nat => ? ? do rewrite diffexpr //=.\r\n```\r\n(if you want, the current code is also fine), c.f. https://github.com/math-comp/math-comp/blob/master/CONTRIBUTING.md#naming-of-variables"},{"author":"proux01","file":"mathcomp/algebra/ssralg.v","date":"2022-11-17T09:01:59Z","comment":"```suggestion\r\nexact: telescope_sumr.\r\n```"},{"author":"proux01","file":"mathcomp/algebra/ssralg.v","date":"2022-11-17T09:06:06Z","comment":"```suggestion\r\nLemma telescope_prodr_eq (a b : nat) (f u : nat -> R) : (a < b)%N ->\r\n    (forall k, (a < k < b)%N -> f k \\is a unit) ->\r\n    (forall k, (a <= k < b)%N -> u k = f k.+1 / f k) ->\r\n  \\prod_(a <= k < b) u k = f b / f a.\r\n```\r\n\r\nAnd renames naturals to `n` and `m` as in `telescope_prodr`.\r\n\r\nIn `telescope_prodr`, the unit ring is not assumed to be commutative, please do the same here.\r\n\r\nLast: it may be worth adding a `telescope_prodf_eq` on fields?\r\n"},{"author":"proux01","file":"mathcomp/algebra/ssralg.v","date":"2022-11-17T09:15:20Z","comment":"Spurious new line"},{"author":"proux01","file":"mathcomp/algebra/ssralg.v","date":"2022-11-17T09:16:35Z","comment":"Please put the `Arguments` command at the end of the section (by consistency with the remaining of the file and so that it already applies in this file)."},{"author":"proux01","file":"mathcomp/algebra/ssralg.v","date":"2022-11-17T09:16:42Z","comment":"Same"},{"author":"CohenCyril","file":"mathcomp/algebra/ssralg.v","date":"2022-11-21T15:40:40Z","comment":"you probably do not need `=> ? ?`\r\n```suggestion\r\nby move=> lenm uE; under eq_big_nat do rewrite uE //=; apply: telescope_sumr.\r\n```"},{"author":"SnarkBoojum","file":"mathcomp/algebra/ssralg.v","date":"2022-11-21T16:13:42Z","comment":"Indeed `=> ? ?` can be removed, but I find putting the whole proof on a single line a bit too much: it prevents stepping to see what's done."},{"author":"CohenCyril","file":"CHANGELOG_UNRELEASED.md","date":"2022-11-22T15:34:03Z","comment":"I think you missed one."},{"author":"CohenCyril","file":"mathcomp/algebra/ssralg.v","date":"2022-11-22T15:36:07Z","comment":"I understand, and that would make sense for a complicated proof and/or for educational purpose. Here, inside the core math-comp library, one can safely put everything on a single line without compromising much. In case someone needs to step through it, they can put `.` instead of `;` and that's it."},{"author":"SnarkBoojum","file":"mathcomp/algebra/ssralg.v","date":"2022-11-23T08:40:22Z","comment":"I do have an educational purpose in mind: these results will be directly used by students when working on exercises, so it really makes sense to make the effort.\r\n\r\nNotice that a student will already have a hard time grasping the idea that they can modify something that is given, and will just freak out when after doing so anyway the editor will complain it can't autosave (I just tried with coqide), so I'd rather have a readily readable proof. Newlines are inexpensive and it's worth it."},{"author":"proux01","file":"mathcomp/algebra/ssralg.v","date":"2022-11-23T09:00:36Z","comment":"We all agree with that in the context of teaching material. The point of Cyril (which I share) is that the code of mathcomp itself is just not that level of teaching material."},{"author":"SnarkBoojum","file":"mathcomp/algebra/ssralg.v","date":"2022-11-23T10:32:55Z","comment":"Real numbers are used at low level, but their construction is hard -- so if it's not readable at low level, it's not a problem: most students never see a construction anyway.\r\n\r\nBut these results are to be used at low level and their proofs are low level. That is something budding students do see very early on the blackboard, so it really should be readable in MC.\r\n\r\nI can just fold now and patch my code, but then I'm pretty sure that will make three more places where proofs will need to be amended for the liber abaci project..."},{"author":"CohenCyril","file":"mathcomp/algebra/ssralg.v","date":"2022-11-23T16:45:36Z","comment":"The liber abaci project and mathcomp 1 (and 2 for what matters) are two distinct entities with two different purposes.\r\n- The liber abaci project will certainly need to provide a way to provide both a short version and an extended version of the same proof for the purposes you have in mind. And both proofs will eventually make sense. Indeed, knowing how to write compact proof has an educational purpose albeit different than the one from a beginners perspective\r\n- Now for the sake of homogeneity of the current library, I'd up for the shortest script for trivial theorems (for experts).\r\n\r\nPlease do not mix the two projects, we can discuss the differences but I'm not sure this is the place."},{"author":"SnarkBoojum","file":"mathcomp/algebra/ssralg.v","date":"2022-11-24T10:13:51Z","comment":"Yes, some discussion will be needed at some point."}],"tags":[],"commits":[{"committer":"proux01","hash":"fe092fd6f18493afb584b1e388cfd885c73e6c5c","message":"Add telescope_sumr_eq, telescope_prodr_eq and telescope_prodf_eq","date":"2022-12-12T09:56:07Z"}]}