{"author":"erikmd","number":455,"diff_summary":[{"file":".gitlab-ci.yml","status":"M","additions":13,"deletions":38},{"file":"Dockerfile","status":"M","additions":13,"deletions":38},{"file":"Dockerfile.make","status":"M","additions":13,"deletions":38}],"state":"merged","open_date":"2020-01-17T15:28:11Z","update_date":"2020-03-12T10:52:23Z","discussion":[{"author":"erikmd","date":"2020-03-08T15:59:11Z","comment":"Hi @CohenCyril I took the opportunity to add 2 commits in this CI-related PR, which is now threefold:\r\n\r\n* Restore the `opam clean -c` option which now works with opam 2.0.6\r\n* Simplify the 2 Dockerfiles a bit\r\n* Remove the 2 jobs ci-lemma-overloading-{8.8,8.9} (coq-lemma-overloading now requires 8.10+)\r\n\r\nRegarding the failure of the ci-finmap-dev job, this would be an upstream issue at first sight:\r\nhttps://github.com/math-comp/finmap/issues/62"}],"review_discussion":[],"tags":[],"commits":[{"author":"erikmd","committer":"erikmd","hash":"a7f4eb76935157112aa844b6c5ac29a36898235f","message":"Revert \"Don't run \"opam clean -c\" to workaround ocaml/opam#3828\"\n\nThis reverts commit a03e0cb0ff40afabcaccba7f764076355ca82962.","date":"2020-01-17T15:14:38Z"},{"author":"erikmd","committer":"erikmd","hash":"563f395e1a41caf4978fe9881250ec68796e36a0","message":"refactor: Simplify the Dockerfiles\n\n* the CLI option --build-arg=compiler=\"${OPAM_SWITCH}\" is now useless\n  (it had been introduced to be able to compile Coq versions < 8.7,\n  while mathcomp-dev now requires Coq 8.7+)\n\n* the \"coqorg/base:bare\" image now contains the two environment vars\n  COMPILER and COMPILER_EDGE => clear COMPILER=\"\" in mathcomp-dev's\n  Dockerfile multi-stage build.","date":"2020-03-08T14:51:14Z"},{"author":"erikmd","committer":"erikmd","hash":"3ae871fff2165c27b8bb389f1829766a4d6f00d9","message":"Fix CI (coq-lemma-overloading dropped compatibility with Coq < 8.10)","date":"2020-03-08T15:15:05Z"}]}