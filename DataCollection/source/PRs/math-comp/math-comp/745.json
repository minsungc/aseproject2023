{"author":"pi8027","number":745,"diff_summary":[{"file":"mathcomp/ssreflect/finfun.v","status":"M","additions":12,"deletions":25}],"state":"open","open_date":"2021-05-19T04:23:57Z","update_date":"2023-01-11T09:15:04Z","discussion":[{"author":"pi8027","date":"2021-05-19T17:22:50Z","comment":"The unification trace obtained by UniCoq (see https://github.com/math-comp/math-comp/issues/701#issuecomment-843729180 for the first attempt with `Set Debug \"unification\"`):\r\nhttps://github.com/math-comp/math-comp/blob/7db7a5fbce42ff387a5750f9fbde5436a9aab1cc/mathcomp/algebra/matrix.v#L342-L343\r\n```\r\neqType =<= Type (App-FO) ERR\r\n?T =<= nat (Meta-Inst) OK\r\n_Set =<= Type (Reduce-Same) OK\r\n?T =<= nat (Meta-Inst) OK\r\n_Set =<= Type (Reduce-Same) OK\r\n(Equality.mixin_of ?sT) =<= (Equality.mixin_of 'M_(m, n)) (App-FO) ERR\r\n_Equality.mixin_of =<= Equality.mixin_of (Rigid-Same) OK\r\n_(sub_sort ?sT) =?= 'M_(m, n) (CS) ERR\r\n__(Equality.sort ?T) =?= \\{ffun 'I_?n * 'I_?n0 -> ?T0\\} (CS) ERR\r\n___?t =?= (prod_finType (ordinal_finType ?n) (ordinal_finType ?n0)) (Meta-Inst) OK\r\n____finType =<= finType (Reduce-Same) OK\r\n___(fun=> ?T0) =?= (fun x : prod_finType (ordinal_finType ?n) (ordinal_finType ?n0) => Equality.sort (?t x : eqType)) (App-FO) ERR\r\n____(fun=> ?T0) =?= (fun x : prod_finType (ordinal_finType ?n) (ordinal_finType ?n0) => Equality.sort (?t x : eqType)) (Lam-Same) ERR\r\n_____(Finite.sort (prod_finType (ordinal_finType ?n) (ordinal_finType ?n0))) =?= ('I_?n * 'I_?n0)\\%type (CS) OK\r\n______(Finite.sort ?t0) =?= 'I_?n (CS) OK\r\n_______?n1 =?= ?n (Meta-Inst) OK\r\n________nat =<= nat (Reduce-Same) OK\r\n_______?t0 =?= (ordinal_finType ?n) (Meta-Inst) OK\r\n________finType =<= finType (Reduce-Same) OK\r\n______(Finite.sort ?t0) =?= 'I_?n0 (CS) OK\r\n_______?n1 =?= ?n0 (Meta-Inst) OK\r\n________nat =<= nat (Reduce-Same) OK\r\n_______?t0 =?= (ordinal_finType ?n0) (Meta-Inst) OK\r\n________finType =<= finType (Reduce-Same) OK\r\n______(prod_finType (ordinal_finType ?n) (ordinal_finType ?n0)) =?= (prod_finType (ordinal_finType ?n) (ordinal_finType ?n0)) (App-FO) OK\r\n_______prod_finType =?= prod_finType (Rigid-Same) OK\r\n_______(ordinal_finType ?n) =?= (ordinal_finType ?n) (App-FO) OK\r\n________ordinal_finType =?= ordinal_finType (Rigid-Same) OK\r\n________?n =?= ?n (Meta-Same-Same) OK\r\n_______(ordinal_finType ?n0) =?= (ordinal_finType ?n0) (App-FO) OK\r\n________ordinal_finType =?= ordinal_finType (Rigid-Same) OK\r\n________?n0 =?= ?n0 (Meta-Same-Same) OK\r\n_____?T0 =?= (Equality.sort (?t x : eqType)) (Meta-Inst) ERR\r\n_____?T0 =?= (Equality.sort (?t x : eqType)) (Meta-Reduce) ERR\r\n______?T0 =?= (let (sort, _) := ?t x in sort) (Meta-Inst) ERR\r\n__(Equality.sort ?T) =?= \\{ffun 'I_?n * 'I_?n0 -> ?T0\\} (Cons-DeltaL) ERR\r\n_(sub_sort ?sT) =?= 'M_(m, n) (App-FO) ERR\r\n_(sub_sort ?sT) =?= 'M_(m, n) (Cons-DeltaL) ERR\r\nThe command has indeed failed with message:\r\nIn environment\r\nR : eqType\r\nm : nat\r\nn : nat\r\nThe term \"SubEqMixin ?sT\" has type \"Equality.mixin_of ?sT\" while it is expected to have type \"Equality.mixin_of 'M_(m, n)\".\r\n```\r\nI don't get why `?T0` does not get instantiated with `R`."}],"review_discussion":[],"tags":[{"tag":"kind: help wanted","description":"PR for which help is requested."}],"commits":[{"author":"pi8027","committer":"pi8027","hash":"4106f94e65e70f813643645b43ae344b6e88eb14","message":"Attempt to remove dffun","date":"2021-10-07T10:39:17Z"}]}