{"author":"CohenCyril","number":596,"diff_summary":[{"file":"CHANGELOG_UNRELEASED.md","status":"M","additions":4,"deletions":0},{"file":"mathcomp/algebra/ssralg.v","status":"M","additions":4,"deletions":0}],"state":"closed","open_date":"2020-09-24T14:07:16Z","update_date":"2020-10-13T16:55:45Z","discussion":[{"author":"chdoc","date":"2020-09-29T09:29:23Z","comment":"This looks a bit bespoke to me, what's the motivation or where is this useful? "},{"author":"CohenCyril","date":"2020-09-29T10:43:56Z","comment":"https://github.com/CohenCyril/signdet/blob/master/signdet.v#L318, ideally that would be `mulrn x` is injective, but that's true only if the characteristic of the ring is `0`. With `b` it's always true. Morever `x *+ b` is a shorthand for `if b then x else 0`, and this boolean might be a membership or an equality, so the injectivity allows to traceback the truthvalue of the said boolean proposition, according to whether the result was zero or not. Thus, I think it can be of general interest."},{"author":"chdoc","date":"2020-09-29T11:30:27Z","comment":"@CohenCyril I can't merge this, so what should I do now? Who, apart from you, is most familiar with that part of the library?"},{"author":"CohenCyril","date":"2020-09-29T11:37:10Z","comment":"woops, I think @thery, @gares, @pi8027, @strub might all be good candidates"},{"author":"thery","date":"2020-09-29T20:14:15Z","comment":"@CohenCyril sorry too cryptic for me, don't see how this could be a reusable theorem.\r\n"},{"author":"CohenCyril","date":"2020-09-30T12:06:59Z","comment":"> @CohenCyril sorry too cryptic for me, don't see how this could be a reusable theorem.\r\n\r\nWell I do think it is reusable. Let me try to explain it another way.\r\n\r\nThe construction `x *+ b` is `x` if `b` otherwise `0`, it is frequently used in combination with membership (e.g. `x \\in G`) or Kronecker symbol (`i == j`), the latter gives a \"Dirac\" function `fun j => x *+ (i == j)` which is thus injective through `mulrIb`.\r\nThis is used pervasively in the representation of diagonal matrices `\\matrix_(i, j) (d 0 i *+ (i == j))`, and this lemma helps identifying nonzero values of the matrix with elements of the diagonal.\r\n\r\nIn other words again, this lemma, explains these \"Dirac/weight function\" are injective on  `b` as long as `x` is nonzero, which allows to infer the validity of `b` (i.e.  `i == j`, or `i \\in G`, depending on the use cases) from the nullity of `x`."},{"author":"thery","date":"2020-09-30T13:42:34Z","comment":"@CohenCyril I've understood what it is your use case, but I just doubt it will be reused in other places."},{"author":"CohenCyril","date":"2020-10-01T10:06:35Z","comment":"What is the conclusion?"},{"author":"thery","date":"2020-10-01T11:23:02Z","comment":"not a fan\r\n"},{"author":"chdoc","date":"2020-10-13T09:30:05Z","comment":"@thery @CohenCyril As the assignee for this PR, I would be happy if we could make progress towards either merging or closing this PR. Personally, I don't think this one-liner will hurt, so I would be in favor of merging it, even if it may be slightly bespoke. \r\n\r\n@CohenCyril How often is this lemma used in your developments?"},{"author":"thery","date":"2020-10-13T09:58:41Z","comment":"@chdoc as I said I am not a big fan, but it will not keep me from sleeping at night if it is merged. My only point if If it is a general construction it should at least be documented. \r\nAs a naive user I would  have missed the theorem, as I would have coded the gard as\r\n`(b%:R * e)` as I feel more at ease manipulating `*` than `*+`\r\n "},{"author":"CohenCyril","date":"2020-10-13T16:48:20Z","comment":"I use it only once so far. Let's close it, I will reopen it if another occurence pops up"}],"review_discussion":[{"author":"pi8027","file":"mathcomp/algebra/ssralg.v","date":"2020-10-06T04:53:17Z","comment":"I have no opinion on how it is useful, but this should be exported from `GRing.Theory`.\r\n"}],"tags":[],"commits":[{"author":"CohenCyril","committer":"CohenCyril","hash":"44427ba49ff61c3c403f708ffd3f8619a4d69807","message":"Adding `mulrIb`","date":"2020-09-28T14:17:51Z"}]}